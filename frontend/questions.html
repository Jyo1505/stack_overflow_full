<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ask a Question</title>
  <link rel="stylesheet" href="css/payments.css">
</head>
<body>

<div class="app-card">
  <h1>Ask a Question</h1>
  <div class="subtitle">
    Ask a question â€“ the community will answer it
  </div>

  <div class="form-group">
    <label>Your Question</label>
    <input id="question" placeholder="Type your question here..." />
  </div>

  <button class="btn" onclick="postQuestion()">Post Question</button>

  <div class="message" id="msg"></div>

  <div class="btn-row">
    <button class="btn-secondary" onclick="location.href='feed.html'">Back</button>
    <button class="btn-danger" onclick="logout()">Logout</button>
  </div>
</div>
<script src="js/config.js"></script>
<script>
const token = localStorage.getItem("token");

function postQuestion() {
  const title = document.getElementById("question").value.trim();
  const msg = document.getElementById("msg");

  if (!title) {
    msg.textContent = "Please enter a question";
    return;
  }

  msg.textContent = "Posting question...";

  fetch(`${API_BASE}/api/questions/create`, {

    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer " + token
    },
    body: JSON.stringify({ title })
  })
  .then(res => res.json())
  .then(data => {
    msg.textContent = data.message || "Question posted successfully";
    document.getElementById("question").value = "";
  })
  .catch(() => {
    msg.textContent = "Network error";
  });
}

function logout() {
  localStorage.removeItem("token");
  location.href = "/";
}
</script>

</body>
</html>
